{% liquid
  assign image = section.settings.image
  assign image_position = section.settings.image_position
%}

{%- if image -%}
  {% capture cta_image %}
    {{-
      image
      | image_url: width: 3840
      | image_tag:
        width: image.width,
        widths: '240, 352, 832, 1200, 1600, 1920, 2560, 3840',
        height: image.height,
        alt: shop.name,
        sizes: '(min-width: 750px) calc(var(--logo-width)), 100vw'
    -}}
  {% endcapture %}
{%- endif -%}

<div
  class="cta-section cta-section_image-{{ image_position }}"
  style="
    --cta-background-color: {{ section.settings.background_color }};
    --padding: {{ section.settings.container_y_padding }}px {{ section.settings.container_x_padding }}px;
  "
>
  <div class="cta-section__text">
    {% if section.settings.sub_header != blank %}
      <h3 class="cta-section__sub-header">{{ section.settings.sub_header }}</h3>
    {% endif %}

    {% if section.settings.header != blank %}
      <h2 class="cta-section__header">{{ section.settings.header }}</h2>
    {% endif %}

    {% if section.settings.description != blank %}
      <div class="cta-section__description">
        {{ section.settings.description }}
      </div>
    {% endif %}

    {% if section.settings.button_text != blank and section.settings.button_link != blank %}
      <a
        href="{{ section.settings.button_link }}"
        class="cta-section__button button"
      >
        {{ section.settings.button_text }}
      </a>
    {% endif %}
  </div>
  <div class="cta-section__image">
    {% if cta_image %}
      {{ cta_image }}
    {% endif %}
  </div>
</div>

{% stylesheet %}
  .cta-section {
    background-color: var(--cta-background-color);
    display: flex;
    flex-direction: column;
    width: 100%;
    max-width: 1920px;
    margin: 0 auto;
  }

  @media only screen and (min-width: 992px) {
    .cta-section {
      flex-direction: row;
    }
  }

  .cta-section_image-left {
    flex-direction: row-reverse;
  }

  .cta-section__text {
    padding: var(--padding);
    width: 100%;
  }

  @media only screen and (min-width: 992px) {
    .cta-section__text {
      width: 55.4%;
    }
  }

  .cta-section__sub-header {
    font-size: 1.5rem;
    font-weight: 400;
    line-height: 1.2;
    margin-bottom: 0.5rem;
  }

  .cta-section__header {
    font-size: 2.5rem;
    font-weight: 600;
    line-height: 1.2;
    margin-top: 0;
    margin-bottom: 0.6rem;
  }

  .cta-section__description {
    margin-bottom: 1.5rem;
  }

  .cta-section__description p {
    margin: 0;
    font-size: 1.75rem;
    line-height: 1.35;
    font-weight: 500;
    letter-spacing: 0.03rem;
  }

  .cta-section__button {
    min-width: 20.3125rem;
    font-size: 1.5rem;
    letter-spacing: 0.05rem;
  }

  .cta-section__image {
    width: 100%;
    background-color: red;
    position: relative;
    height: 350px;
  }

  @media only screen and (min-width: 992px) {
    .cta-section__image {
      height: auto;
      width: 44.6%;
    }
  }

  .cta-section__image img {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    display: block;
    object-fit: cover;
  }
{% endstylesheet %}

{% schema %}
{
  "name": "Call to Action",
  "class": "call-to-action-section",
  "settings": [
    {
      "type": "color",
      "id": "background_color",
      "label": "Background Color",
      "default": "#EAD4C9"
    },
    {
      "type": "header",
      "content": "Spacing"
    },
    {
      "type": "range",
      "id": "container_x_padding",
      "min": 0,
      "max": 100,
      "step": 5,
      "unit": "px",
      "label": "Container Horizontal Padding",
      "default": 40,
      "info": "Left and right padding for the content container"
    },
    {
      "type": "range",
      "id": "container_y_padding",
      "min": 0,
      "max": 100,
      "step": 5,
      "unit": "px",
      "label": "Container Vertical Padding",
      "default": 50,
      "info": "Top and bottom padding for the content container"
    },
    {
      "type": "select",
      "id": "image_position",
      "label": "Image Position",
      "options": [
        {
          "value": "left",
          "label": "Left"
        },
        {
          "value": "right",
          "label": "Right"
        }
      ],
      "default": "right"
    },
    {
      "type": "header",
      "content": "Content"
    },
    {
      "type": "text",
      "id": "sub_header",
      "label": "Sub Header"
    },
    {
      "type": "text",
      "id": "header",
      "label": "Header"
    },
    {
      "type": "richtext",
      "id": "description",
      "label": "Description"
    },
    {
      "type": "text",
      "id": "button_text",
      "label": "Button Text"
    },
    {
      "type": "product",
      "id": "button_link",
      "label": "Button Link"
    },
    {
      "type": "image_picker",
      "id": "image",
      "label": "Image"
    }
  ],
  "presets": [
    {
      "name": "Call to Action",
      "settings": {
        "background_color": "#EAD4C9",
        "container_x_padding": 40,
        "container_y_padding": 50,
        "image_position": "right",
        "button_text": "BALL OUT"
      }
    }
  ]
}
{% endschema %}
